//https://book-elements.github.io - disengage safety protocols Engelman-Alpha_121
!(async function({Array:e,console:t,customElements:s,CustomEvent:o,document:a,fetch:_,HTMLElement:i,localStorage:n,location:r,Object:d,navigator:h,setTimeout:l,URLSearchParams:c,Promise:u}=window){function O(...e){t.log(`%c ${e.shift()} `,"background:gold",...e)}function p(...e){t.error(`%c ${e.shift()} `,"background:red;color:white",...e)}const g="background:red;color:white",[x,E,m,T,R,H,U,b,A,f,C,S,y,F]="define,attachShadow,shadowRoot,innerHTML,getAttribute,setAttribute,querySelector,querySelectorAll,addEventListener,removeEventListener,whenDefined,then,onclick,part".split(","),B=!r.host.includes("github.io"),k=e=>s.get(e),L=(e,{append:t=[],style:s={},attrs:o={},..._}={},i=a.createElement(e))=>(i.append(...t),d.assign(i.style,s),d.entries(o).forEach((([e,t])=>i[H](e,t))),d.assign(i,_)),I=(e,t={})=>L("style",{textContent:e,...t}),N=(e=r.search)=>new c(e),D=(e,t="")=>N().get(e)||n.getItem(e)||t,M=N(a.currentScript.src.split("?")[1]),J=M.get("prefix")||"book",P=M.get("chapterprefix")||"";O("Component Prefix - exempt: <book-reader> = ",J);const G="civilaization",K="book",[V,Q,X,Y,Z,W,v]=["english","lang","nr","translate","languages","count","chapter"],w="en",$=D(V,"gb"),z="h2",j="book-loaded",q="add-chapter",ee="language-changed",te="another-chapter",se="paragraph-at-top",oe="paragraph",ae="chapter",_e="action",ie="detail",ne="chapter-highlight",re="chapter-number";a.head.append(L("script",{src:"https://toast-message.github.io/element.js",onload:()=>O("<toast-message> loaded with <script> and defined")}));const de=e=>{a[U]("toast-message")?showToastMessage(e):l((()=>{de(e)}),100)},he="connectedDoneCallback",le="renderedCallback",ce="renderedOnceCallback",ue="@keyframes fadeIn{from{opacity:0}to{opacity:1}}{name}{animation:fadeIn 1s forwards}",Oe="chapterlabel",pe="chaptertitle",ge={AREA51:{name:"book-reader",css:":host{font:18px arial;margin:0 auto;padding:0;max-width:1024px}:host{--radius:6px;--titlebackground:steelblue;--textcolor:beige;--aicolor:gold;--chaptertitle:#9C2E35;--chapteractions:indianred;--scrollblock:var(--chaptertitle);--scrollbar:#eee;var(--titlebackground);--chapter-title-size:1.2em;}@keyframes fadeOut{from{opacity:1}to{opacity:0}}.fade-out{animation:fadeOut 1s forwards}"+ue+':host{height:95vh;overflow:hidden}:host{display:grid;gap:var(--radius);grid-template-rows:auto 1fr;grid-template-columns:2em 1fr;grid-template-areas:"header header" "left right"}',shadowRoot:"open"},THEQUICKBROWNFOXJMPSOVERTHELAZYDOG:{name:J+"-title",css:"{name}{user-select:none;grid-area:header}{name} h1{padding:0.25em;background:var(--titlebackground);color:var(--textcolor);margin-block:0;border-radius:var(--radius)}{name} h1{text-shadow:1px 1px 1px black}"+ue+"{name} span{font-style:italic;color:var(--aicolor)}"},THEQUICKBROWNFOXJUMPSOVERTHELAZYDOG:{name:J+"-chapter-numbers",css:`{name}{user-select:none;grid-area:left;display:flex;flex-direction:column}.${re}{display:flex;flex:1;align-items:center;justify-content:center}.${re}{opacity:.5;margin-bottom:.2em;border-radius:var(--radius);background:lightblue;cursor:pointer}.${ne}{opacity:1;background:var(--chaptertitle);color:var(--textcolor)}`+ue},THEQUICKBROWNFXJUMPSOVERTHELAZYDOG:{name:J+"-chapter-number",css:""},THEQUCKBROWNFOXJUMPSOVERTHELAZYDOG:{name:P+"chapter-title",css:`{name}{display:block;position:sticky;top:0em;padding:.3em .5em;user-select:none;margin-block:0;background:var(--chaptertitle);color:var(--textcolor);border-top-left-radius:var(--radius);text-shadow:1px 1px 1px black}[part='${Oe}']{display:block;font-size:0.6em}[part='${pe}']{font-size:var(--chapter-title-size);margin-block:0em}`},THEQUICBROWNFOXJUMPSOVERTHELAZYDOG:{name:P+"chapter-actions",css:"{name}{background:var(--chapteractions);display:flow-root;border-bottom-left-radius:var(--radius)}{name}{position:sticky;xtop:2.5em}"},THEQUICKBROWNFOXJUMPSoVERTHELAZYDOG:{name:J+"-chapters",css:"{name}{display:flex;flex-direction:column;grid-area:right}{name}{border-radius:var(--radius)}{name}{overflow-y:scroll;scroll-margin:3em;{name}{scroll-behavior:smooth;scrollbar-width:auto;scrollbar-color:var(--scrollblock) var(--scrollbar)}"},THEQUICKBROWNFOXJUMPSOVeRTHELAZYDOG:{name:J+"-chapter",css:"{name}{background:beige}"+ue},THEQUICKBROWNFOXJUMPSVERTHELAZYDOG:{name:P+"chapter-paragraphs",css:"{name}{display:block;margin:0 0.5em}{name} p{text-wrap:pretty}"},THEQUICKBOWNFOXJUMPSOVERTHELAZYDOG:{name:"svg-flag",css:""},THEQUICKBROWNFOXJUMPSOVERTHeLAZYDOG:{name:"flag-baseclass",shadowRoot:"open",css:"img{width:var(--flagsize,40px);margin:5px;cursor:pointer}"},THEQUICKBRoWNFOXJUMPSOVERTHELAZYDOG:{name:"translate-languages",css:"{name}{float:right;margin-right:2em}.translated{opacity:.2;order:0}"},THEQUICKBROWNFOXJUMPSOVERTHELaZYDOG:{name:"language-choices",css:`:host{position:relative;float:right;right:4px}:host{--flagsize:1em}:host([${Y}]){opacity:.2}`},THEQUICKBROWNFOXJUMPSOVERTHELAZYDoG:{name:"language-flag",css:""},tHEQUICKBROWNFOXJUMPSOVERTHELAZYDOG:{name:"translate-flag",css:"{name}{display:inline-block;vertical-align:top;background:red;height:100%;border:1px solid green}"},THEQUICKBRONFOXJUMPSOVERTHELAZYDOG:{name:"svg-icon",css:"{name}{float:right;margin:5px}{name} svg:hover{cursor:pointer;stroke:beige;fill:beige}"},THEQUICKBROWNFoXJUMPSOVERTHELAZYDOG:{name:"chapter-github-link",css:""}};O(`Web Components: (${J}-elements)`,d.keys(ge).map((e=>"<"+ge[e].name+">")).join(", "));const xe=e=>ge[e].css.replaceAll("{name}",ge[e].name).replaceAll("}","}\n"),Ee=class extends i{c_exodus_20_15({type:e,func:t=(()=>"voodoo"),scope:s=a,options:o={}}){s[A](e,t,o);let _=()=>s[f](e,t,o);return this.b_exodus_20_15=this.b_exodus_20_15||[],this.b_exodus_20_15.push(_),_}d_exodus_20_15({type:e="CustomEvent",detail:t={},bubbles:s=!0,composed:a=!0,scope:_=this}){_.dispatchEvent(new o(e,{detail:t,bubbles:s,composed:a}))}e_exodus_20_15(e,t=this){return t&&t!=a&&t!=window&&t.closest(e)||this.e_exodus_20_15(e,t?.getRootNode()?.host||t?.parentNode)}I_exodus_20_15(){return this.y_exodus_20_15.tagName.toLowerCase()+"-event"}K_exodus_20_15({[_e]:e,func:t}){this.c_exodus_20_15({type:this.I_exodus_20_15(),func:s=>{let{action:o,...a}=s[ie];o==e&&t(s)}})}J_exodus_20_15({action:e,detail:t}){this.d_exodus_20_15({type:this.I_exodus_20_15(),[ie]:{action:e,...t}})}get y_exodus_20_15(){return this.e_exodus_20_15(ge.AREA51.name)}get y_exodus_20_15src(){if(this.hasAttribute(K))return!1;let e=this.y_exodus_20_15[R]("src");return e.includes("/book")&&(e=e.split("/book")[0]),e}get z_exodus_20_15(){return this.y_exodus_20_15[R](K)}get t_exodus_20_15(){return this.y_exodus_20_15[m]}get h_exodus_20_15(){return this.t_exodus_20_15[U](ge.THEQUICKBROWNFOXJUMPSoVERTHELAZYDOG.name)}get w_exodus_20_15(){return[...this.h_exodus_20_15[b](ge.THEQUICKBROWNFOXJUMPSOVeRTHELAZYDOG.name)]}get i_exodus_20_15(){return this.e_exodus_20_15(ge.THEQUICKBROWNFOXJUMPSOVeRTHELAZYDOG.name)}get g_exodus_20_15(){return this.i_exodus_20_15?.[X]}get C_exodus_20_15(){return this.z_exodus_20_15+"_chapterNr"}get B_exodus_20_15(){const e=this.C_exodus_20_15;let t=Number(D(v,n.getItem(e)||1));return isNaN(t)&&(t=1),t}set B_exodus_20_15(e){if(this.B_exodus_20_15!==e){const t=this.C_exodus_20_15;de(`saved to localStorage: ${t}=${e}`),n.setItem(t,e)}}F_exodus_20_15(e="en",t=1){return`/chapters/chapter-${String(t).padStart(3,"0")}-${e}.md`}j_exodus_20_15(e){return this.t_exodus_20_15[U](ge.THEQUICKBROWNFOXJUMPSOVeRTHELAZYDOG.name+`[${X}="${e}"]`)}k_exodus_20_15(e){return[...this.t_exodus_20_15[b](`[id^="p-${e}-"]`)]}r_exodus_20_15(e){return this.k_exodus_20_15(e)[0]}s_exodus_20_15(e){return this.k_exodus_20_15(e).slice(-1)[0]}a_exodus_20_15({element:e=this,block:s="start",behavior:o="smooth",inline:a="nearest"}){e?e.scrollIntoView({behavior:o,block:s,inline:a}):t.warn("no scroll on element:",e)}l_exodus_20_15(e,t=this.j_exodus_20_15(e)){O("gotoChapter",e,t),this.a_exodus_20_15({element:t}),this.J_exodus_20_15({[_e]:se,[ie]:{chapter:t}})}get m_exodus_20_15(){return D(Q,w)}set m_exodus_20_15(e){const t=new c(r.search),s=D("reload",!1);t.set(Q,e),n.setItem(Q,e),history.pushState({},"","?"+t.toString()),s?r.search=t.toString():this.J_exodus_20_15({type:ee,[ie]:{lang:e},scope:a})}get v_exodus_20_15(){return r.href.substring(0,r.href.lastIndexOf("/"))}get x_exodus_20_15(){return"/book/"+(this.y_exodus_20_15[R](K)||G)}get u_exodus_20_15(){let e;if(this.y_exodus_20_15.hasAttribute(K))e="."+this.x_exodus_20_15;else{const t=this.y_exodus_20_15[R]("src"),s=this.v_exodus_20_15+this.x_exodus_20_15;e=t||s}return e}set u_exodus_20_15(e){O("set u_exodus_20_15",e),this[H]("src",e)}n_exodus_20_15(e,t={},s=e.name,o=s){return t={[F]:o.replace(J+"-",""),...t},L(s,t)}async o_exodus_20_15({src:e=!1,lang:s=this.m_exodus_20_15,nr:o=1}){e||(("us"==s||"gb"==s)&&(s=w),e=this.u_exodus_20_15+this.F_exodus_20_15(s,o)+"?fetchChapter");try{const a=await _(e);if(!a.ok)return t.error(a.status,e,s,o),a.status;const i=await a.text();return i.length<800&&i.includes("Warning")&&t.warn(i),i}catch(e){return void t.warn(e.message,s,o,this.D_exodus_20_15)}}p_exodus_20_15({nr:e=1,lang:s=w,action:o="defaultJSON"}){if(this.y_exodus_20_15src){let a=this.y_exodus_20_15src+`/api.php?action=${o}&${X}=${e}&${Q}=${s}`;return t.log("%c APIcall ","background:lightcoral",this.y_exodus_20_15src),t.log("%c APIcall ","background:lightcoral",a),a}return t.log("%c get allchapsters.json ","background:lightcoral"),this.v_exodus_20_15+this.x_exodus_20_15+"/allchapters.json"}get E_exodus_20_15(){let e=this.y_exodus_20_15.D_exodus_20_15,t=e?.languages;if(t)return t;p("No languages in JSON ",e||this.y_exodus_20_15)}get q_exodus_20_15(){if(this.E_exodus_20_15){let s=new Set(d.keys(this.E_exodus_20_15)),o=D(Y,"");return o=new Set([...o].filter((e=>2==e.length))),[...(e=s,t=o,new Set([...e,...t]))]}var e,t;p("No $ISO languages")}connectedCallback(){this[he]&&this[he](),this[le]&&l((()=>this[le]())),this[ce]&&l((()=>{this[ce](),delete this[ce]}))}};s[x](ge.AREA51.name,class extends Ee{static get observedAttributes(){return["src","book"]}attributeChangedCallback(e,s,o){this.isConnected&&t.warn("attributeChanged:",e,s,o)}constructor(){super()[E]({mode:ge.AREA51[m]}).append(L("grouped-styles",{append:[I(xe("AREA51")+xe("THEQUICKBROWNFOXJMPSOVERTHELAZYDOG"),{id:"book_elements"}),I(xe("THEQUICKBROWNFOXJUMPSOVERTHELAZYDOG"),{id:"chapter_numbers"}),I(xe("THEQUICKBROWNFOXJUMPSoVERTHELAZYDOG")+xe("THEQUICKBROWNFOXJUMPSOVeRTHELAZYDOG")+xe("THEQUCKBROWNFOXJUMPSOVERTHELAZYDOG")+xe("THEQUICBROWNFOXJUMPSOVERTHELAZYDOG")+xe("THEQUICKBROWNFOXJUMPSVERTHELAZYDOG"),{id:"chapter_elements"}),I(xe("THEQUICKBRoWNFOXJUMPSOVERTHELAZYDOG")+xe("THEQUICKBRONFOXJUMPSOVERTHELAZYDOG")+xe("tHEQUICKBROWNFOXJUMPSOVERTHELAZYDOG"),{id:"flags_and_icons"}),this.titles=I(ge.THEQUICKBROWNFOXJUMPSoVERTHELAZYDOG.name+` [part="${Oe}"],`+ge.THEQUICKBROWNFOXJUMPSoVERTHELAZYDOG.name+` ${ge.THEQUICKBROWNFOXJUMPSVERTHELAZYDOG.name},`+ge.THEQUICKBROWNFOXJUMPSoVERTHELAZYDOG.name+` ${ge.THEQUICBROWNFOXJUMPSOVERTHELAZYDOG.name}{display:none}`,{id:"toggle_titles",onload:()=>{this.titles.disabled=!N().has("titles")}})]}))}async[le](){this.K_exodus_20_15({[_e]:te,func:e=>{const t=e[ie][ae][X];this.B_exodus_20_15=t}}),this.B_exodus_20_15=this.B_exodus_20_15}[he](){this.A_exodus_20_15()}async A_exodus_20_15(){let e,s=!1;const o=this.p_exodus_20_15({});try{e=await _(o)}catch(e){s=!0,e.message.includes("Failed to fetch")&&p(e.message,o)}let i;s||(this.D_exodus_20_15=await(e.ok?e.json():{}),t.assert(this.D_exodus_20_15.hasOwnProperty("languages"),`%c ${o} does not have 'languages' key`,g)),t.log("%c renderBook: ","background:lightgreen",{[J]:this.u_exodus_20_15,chapters:this.D_exodus_20_15,languages:d.keys(this.E_exodus_20_15||{}),area51:{src:this.y_exodus_20_15src,JSON:o,[K]:this.z_exodus_20_15,default:this.x_exodus_20_15,dbaccount:"ratteval",dbpassword:"R0deHar1ng",dblogin:"https://roads-technology.nl/components/passwords/instructions.mp4"}});let n=0;if(!s)for(const[e,t]of d.entries(this.E_exodus_20_15))t.length>n&&(i=e,n=t.length);this.G_exodus_20_15=D(W,n),this[m].append(this.n_exodus_20_15(ge.THEQUICKBROWNFOXJMPSOVERTHELAZYDOG),this.n_exodus_20_15(ge.THEQUICKBROWNFOXJUMPSOVERTHELAZYDOG),this.n_exodus_20_15(ge.THEQUICKBROWNFOXJUMPSoVERTHELAZYDOG));const h={F5:e=>{r.reload()},PageUp:e=>{this.B_exodus_20_15>1&&this.l_exodus_20_15(this.B_exodus_20_15-1)},PageDown:e=>{this.B_exodus_20_15<this.G_exodus_20_15&&this.l_exodus_20_15(this.B_exodus_20_15+1)},ArrowUp:e=>{this.h_exodus_20_15.scrollBy(0,-200)},ArrowDown:e=>{this.h_exodus_20_15.scrollBy(0,200)},Home:e=>{this.a_exodus_20_15({element:this.r_exodus_20_15(this.B_exodus_20_15),block:"center"})},End:e=>{this.a_exodus_20_15({element:this.s_exodus_20_15(this.B_exodus_20_15),block:"center"})},t:e=>{this.toggletitles()}};l((()=>{O("UI keys",d.keys(h).join(", "))}),500),a[A]("keydown",(e=>{e.preventDefault(),h[e.key]?h[e.key](e):t.warn("Key",e.key)}))}toggletitles(e=undefined){this.titles.disabled=!this.titles.disabled}domtree(e=this[m][U]("h2")){a[A]("component-tree",(e=>{let s=[...e.composedPath()].reverse();s=s.slice(s.indexOf(a.body)+1,1/0);let o=0;O("simplified DOM tree"),s.forEach((e=>{t.log(" ".repeat(o),e),o++}))}),!0),e?.dispatchEvent(new o("component-tree",{bubbles:!0,composed:!0}))}}),s[x](ge.THEQUICKBROWNFOXJMPSOVERTHELAZYDOG.name,class extends Ee{[he](){const e=((e,t="",s="")=>`<${e} ${s}>${t}</${e}>`)(ge.THEQUICKBROWNFOXJUMPSOVERTHELaZYDOG.name,"","exportparts='language-select'");this[T]=`<h1>Civil<span>ai</span>zation ${e}</h1>`}}),s[x](ge.THEQUICKBROWNFOXJUMPSOVERTHELaZYDOG.name,class extends Ee{[he](e=ge.THEQUICKBROWNFOXJUMPSOVERTHELAZYDoG.name){const t="language-select";l((()=>{import("https://language-select.github.io/select-button.min.js")[S]((()=>{O("<language-select> imported and defined")}))}),1),this[E]({mode:"open"}).append(I(t+"{float:right;font-size:80%}"+t+":hover{color:steelblue}"+t+"::part(svg){min-width:1em}"),L(t,{attrs:{[F]:t,selected:this.m_exodus_20_15,languages:this.y_exodus_20_15.q_exodus_20_15}})),this.K_exodus_20_15({[_e]:t,func:e=>{this.m_exodus_20_15=e[ie].iso},scope:a})}}),s[C](ge.THEQUICKBOWNFOXJUMPSOVERTHELAZYDOG.name)[S]((()=>{s[x](ge.THEQUICKBROWNFOXJUMPSOVERTHeLAZYDOG.name,class extends((e=>class extends Ee{})(k(ge.THEQUICKBOWNFOXJUMPSOVERTHELAZYDOG.name))){get y_exodus_20_15(){return this.e_exodus_20_15(ge.AREA51.name)}connectedCallback(){let e=L(ge.THEQUICKBOWNFOXJUMPSOVERTHELAZYDOG.name),t=this[Q]||this[R](Q)||this[R]("is");t==w&&(t=$),e[H]("is",t),this[E]({mode:ge.THEQUICKBROWNFOXJUMPSOVERTHeLAZYDOG[m]}).append(I(xe("THEQUICKBROWNFOXJUMPSOVERTHeLAZYDOG")),e),this[he]&&this[he](),this[le]&&this[le]()}}),s[x](ge.THEQUICKBRoWNFOXJUMPSOVERTHELAZYDOG.name,class extends Ee{[he](){this.y_exodus_20_15.q_exodus_20_15.map((e=>{this.append(this.n_exodus_20_15(ge.tHEQUICKBROWNFOXJUMPSOVERTHELAZYDOG,{[Q]:e}))}))}}),s[x](ge.THEQUICKBROWNFOXJUMPSOVERTHELAZYDoG.name,class extends(k(ge.THEQUICKBROWNFOXJUMPSOVERTHeLAZYDOG.name)){[he](){this[y]=()=>{this.m_exodus_20_15=this[Q]}}}),s[x](ge.tHEQUICKBROWNFOXJUMPSOVERTHELAZYDOG.name,class extends(k(ge.THEQUICKBROWNFOXJUMPSOVERTHeLAZYDOG.name)){[he](e=this.g_exodus_20_15,s=this[Q]){this[H]("lang",this.lang=s),this[H]("nr",this.nr=e),this[y]=async()=>{let o=B?"(DEV)":"(missing OpenAI key)";t.log(`Translate ${e} -> ${s} ${o}`,B),de(`Translating ${s.toUpperCase()} ${o}`),this.style.opacity=.3;let a="";if(B){let o=this.p_exodus_20_15({nr:e,lang:s,[_e]:Y});o+="&book="+this.z_exodus_20_15,o=`https://hexedland.com/pod21/api.php?action=translate&nr=${e}&lang=${s}&book=${this.z_exodus_20_15}`,t.error(this.z_exodus_20_15,o),a=await this.o_exodus_20_15({src:o})}else{t.warn("simulating API call");const e=Math.floor(3001*Math.random())+2e3;await new u((t=>l(t,e)))}t.log(`Translated ${e} -> ${s}`,a.length,"chars"),de(`Translated ${s.toUpperCase()}`),this.remove()}}[le](){const e=((e,t)=>this.E_exodus_20_15[e].includes(t))(this.lang,this.nr);this.classList.toggle("translated",e)}})})),s[x](ge.THEQUICKBROWNFOXJUMPSoVERTHELAZYDOG.name,class extends Ee{[he](){const t=this.y_exodus_20_15.G_exodus_20_15;t?(O(`Reading all ${t} Chapters (async)`),this.y_exodus_20_15.H_exodus_20_15=e.from({length:t},((e,t)=>this.n_exodus_20_15(ge.THEQUICKBROWNFOXJUMPSOVeRTHELAZYDOG,{[X]:++t})))):(p("No chapterCount"),this.y_exodus_20_15.H_exodus_20_15=[L("p",{style:{color:"red"},[T]:`No ${this.z_exodus_20_15||"[bookname]"} chapters read from: <b>${this.y_exodus_20_15src}</b>`})]),this.append(...this.y_exodus_20_15.H_exodus_20_15);let s,o=0;const a=()=>{o=this.scrollTop;for(const e of this.w_exodus_20_15){const t=e.getBoundingClientRect(),s=600;if(t.top<=s&&t.bottom>=s-300){this.J_exodus_20_15({[_e]:se,[ie]:{[oe]:e[U](ge.THEQUICKBROWNFOXJUMPSVERTHELAZYDOG.name)[U]("p")}});break}}};this.c_exodus_20_15({type:"scroll",func:()=>{var e;e=a,clearTimeout(s),s=l(e,200)},scope:this})}}),s[x](ge.THEQUICKBROWNFOXJUMPSOVeRTHELAZYDOG.name,class extends Ee{set So_Long_And_Thanks_For_All_TheFish(e){this._So_Long_And_Thanks_For_All_TheFish[T]="",this._So_Long_And_Thanks_For_All_TheFish.append(this.n_exodus_20_15(ge.THEQUICKBROWNFOXJUMPSVERTHELAZYDOG,{[T]:e}))}get So_Long_And_Thanks_For_All_TheFishMarkdown(){let e="##"+this[U](z).innerText+"\n";return e+=this._So_Long_And_Thanks_For_All_TheFish[T],h.clipboard.writeText(e)[S]((()=>de("Chapter text copied to clipboard"))).catch((e=>t.error("Failed to copy text: ",e))),e}async[he](){this.So_Long_And_Thanks_For_AllTheFish()}async So_Long_And_Thanks_For_AllTheFish(){t.assert(this.m_exodus_20_15&&this[X],"%c Missing .lang and .nr parameters ",g,this),this[H](Q,this.m_exodus_20_15),this[H](X,this[X]);let e=await this.o_exodus_20_15({[Q]:this.m_exodus_20_15,[X]:this[X]});if("404"==e)de(`Chapter ${this[X]} not found`);else{this[T]="",this.append(this._So_Long_And_Thanks_For_All_TheFish=L(ge.THEQUICKBROWNFOXJUMPSVERTHELAZYDOG.name,{[T]:e}));let t=this.y_exodus_20_15.H_exodus_20_15,s=t.indexOf(this);t[s]=!1,0==t.filter(Boolean).length&&l((()=>{de("Book loaded. Chapter: "+this.B_exodus_20_15),this.l_exodus_20_15(this.B_exodus_20_15),this.J_exodus_20_15({[_e]:j}),O(`All ${t.length} chapters loaded`,"Event:",j)}),0),this.J_exodus_20_15({[_e]:q,[ie]:{[ae]:this}})}}[le](){this.K_exodus_20_15({[_e]:ee,func:e=>{this.y_exodus_20_15.classList.add("fade-out"),this.So_Long_And_Thanks_For_AllTheFish(),this.loadChapterImages()},scope:a})}loadChapterImages(){t.error("insert IMG",this[X],this),1==this[X]&&l((()=>{this.insertAdjacentHTML("afterbegin",'<img src="/book/civilaization/chapter_imgs/chapter-1.webp" alt="Chapter 1 Image">')}),100)}}),s[x](ge.THEQUICKBROWNFoXJUMPSOVERTHELAZYDOG.name,class extends Ee{[le](){const{nr:e,lang:t}=this.i_exodus_20_15;this.append(me({is:"github",[y]:s=>{let o=`https://github.com/${G}/${G}.github.io/blob/main/book/${G}`+this.F_exodus_20_15(t,e);window.open(o,"_blank")}}))}}),s[x](ge.THEQUICKBROWNFOXJUMPSVERTHELAZYDOG.name,class extends Ee{[le](){this[X]=this.g_exodus_20_15,this[T]=[[/#{3}\s?([^\n]+)/g,"<h3>$1</h3>"],[/#{2}\s?([^\n]+)/g,"<h2>$1</h2>"],[/#{1}\s?([^\n]+)/g,"<h1>$1</h1>"],[/\*\*\s?([^\n]+)\*\*/g,"<b>$1</b>"],[/_([^_`]+)_/g,"<i>$1</i>"],[/([^\n]+\n?)/g,"<p>$1</p>"],[/([^\n]+)(\*)([^\n]+)/g,"<ul><li>$3</li></ul>"],[/!\[([^\]]+)\]\(([^)]+)\s"([^")]+)"\)/g,'<img src="$2" alt="$1" title="$3">'],[/\[([^\]]+)\]\(([^)]+)\)/g,'<a href="$2">$1</a>']].reduce(((e,[t,s])=>e.replace(t,s)),this[T]),this[b]("p:empty").forEach((e=>e.remove())),[...this[b]("p")].map(((e,t)=>(e.id=`p-${this[X]}-${++t}`,e)));let e=this[U](z);if(e){let[t,s]=e.textContent.split(":");e.remove(),this.before(this.n_exodus_20_15(ge.THEQUCKBROWNFOXJUMPSOVERTHELAZYDOG,{append:[L("span",{[F]:Oe,[T]:t}),L(z,{[F]:pe,[T]:s})]}),this.n_exodus_20_15(ge.THEQUICBROWNFOXJUMPSOVERTHELAZYDOG,{append:[L(ge.THEQUICKBROWNFoXJUMPSOVERTHELAZYDOG.name),L(ge.THEQUICKBRoWNFOXJUMPSOVERTHELAZYDOG.name)]}))}else t.warn(`%c No ${z} Markdown ## found in chapter `,"background:orange",this[X]||"No this.nr")}}),s[x](ge.THEQUICKBROWNFXJUMPSOVERTHELAZYDOG.name,class extends Ee{[le](){this[v];const e=this[X];this[T]=e,this.style.order=e,this.classList.add(re),this[y]=()=>this.l_exodus_20_15(e)}}),s[x](ge.THEQUICKBROWNFOXJUMPSOVERTHELAZYDOG.name,class extends Ee{[le](){this.K_exodus_20_15({[_e]:se,func:s=>{let{[ae]:o,[oe]:a}=s[ie];a&&(o=a.closest(ge.THEQUICKBROWNFOXJUMPSOVeRTHELAZYDOG.name)),t.assert(o,"%c No chapter in Event detail ",g,s.detail);let _=this.B_exodus_20_15,i=o[X];e[_-1].classList.remove(ne),e[i-1].classList.add(ne),this.J_exodus_20_15({[_e]:te,[ie]:{[ae]:o}})}});let e=[];this.K_exodus_20_15({[_e]:q,func:t=>{const{[ae]:s}=t[ie];if(s.number)return;const o=s.number=this.n_exodus_20_15(ge.THEQUICKBROWNFXJUMPSOVERTHELAZYDOG,{[v]:s,[X]:s[X]});e.push(o),this.append(o)}})}});const me=e=>L(ge.THEQUICKBRONFOXJUMPSOVERTHELAZYDOG.name,e);s[x](ge.THEQUICKBRONFOXJUMPSOVERTHELAZYDOG.name,class extends i{connectedCallback(e=this.is||this[R]("is")){this[T]={github:'<svg width="30px" viewBox="0 0 96 96"><path d="m49.3 0c-27 0-49 22-49 49 0 22 14 40 33 47 2 0 3-1 3-2 0-1 0-5 0-9-14 3-16-6-16-6-2-6-5-7-5-7-4-3 0-3 0-3 5 0 8 5 8 5 4 7 11 5 14 4 0-3 2-5 3-7-11-1-22-5-22-24 0-5 2-10 5-13 0-1-2-6 0-13 0 0 4-1 13 5a47 47 0 0112-2c4 0 8 1 12 2 9-6 13-5 13-5 3 7 1 12 0 13 3 3 5 8 5 13 0 19-11 23-22 24 2 2 3 4 3 9 0 7 0 12 0 14 0 1 1 3 3 2 19-7 33-25 33-47 3-27-19-49-46-49z"/></svg>'}[e],this[H]("part","icon_"+e)}})})();